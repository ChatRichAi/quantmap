---
name: stock-sniper
description: A股超短线智能分析系统，结合多源数据进行加权分析。自动扫描市场异动股票，整合akshare实时数据、TradingView技术图表（5m/15m/1h K线、订单流、支撑阻力、成交量分布）、新闻热点题材、股吧舆情数据，生成完整的Markdown分析报告和可视化HTML图表页面。适用于每日9:00市场扫描和盘中异动监测，提供基于超短策略框架的交易决策支持。
---

# 股票狙击手 - A股超短线智能分析系统

**版本**: 1.0  
**注入时间**: 2026-02-12  
**用途**: 自动化A股超短线分析与决策支持

---

## 🎯 功能特性

### 多源数据整合
1. **akshare 实时数据** - 股票行情、资金流向、龙虎榜
2. **新闻热点** - 东方财富、新浪财经实时新闻，自动提取关联题材
3. **股吧舆情** - 东方财富股吧情绪分析，看多/看空比例
4. **TradingView 技术分析** - K线图、订单流、支撑阻力、成交量分布

### 超短策略分析框架
基于 chaoduan-strategy 六要素框架：
- 指数环境 (15%)
- 主线题材 (25%)
- 情绪周期 (20%)
- 个股定位 (20%)
- 风偏识别 (10%)
- 联动关系 (10%)

### 输出成果
- 📄 Markdown 结构化分析报告
- 🌐 HTML 可视化图表页面
- 📊 综合评分 (0-10分)
- 💡 交易建议 (买入价位/止损/目标)

---

## 🚀 使用方式

### 方式1: 自动定时扫描
**已配置**: 每周一至周五 9:00 自动扫描市场异动

### 方式2: 手动扫描市场
```
"运行股票狙击手扫描今日市场"
"股票狙击手，扫描异动"
```

### 方式3: 分析指定股票
```
"分析 000001 平安银行"
"股票狙击手，分析 300059 东方财富"
```

### 方式4: 命令行调用
```bash
# 分析指定股票
cd skills/stock-sniper/scripts
python stock_sniper.py --code 000001 --name 平安银行

# 扫描市场异动
python stock_sniper.py --scan --top 10

# 包含TradingView分析
python stock_sniper.py --code 000001 --tv
```

---

## 📁 脚本资源

### 核心分析脚本

| 脚本 | 功能 |
|------|------|
| `stock_sniper.py` | 主控脚本，整合所有分析流程 |
| `auto_scan.py` | 自动扫描入口（定时任务调用） |
| `market_scanner.py` | akshare市场异动扫描 |
| `news_fetcher.py` | 新闻热点获取与题材分析 |
| `guba_sentiment.py` | 股吧舆情情绪分析 |
| `tv_chart_capture.py` | TradingView图表获取指南 |
| `technical_analyzer.py` | 技术分析引擎与评分 |
| `report_generator.py` | Markdown/HTML报告生成 |

### 参考文档

| 文档 | 内容 |
|------|------|
| `references/chaoduan_framework.md` | 超短策略详细框架 |
| `references/scoring_system.md` | 加权评分体系说明 |
| `references/tv_indicators.md` | TradingView指标使用指南 |

### 资源文件

| 文件 | 用途 |
|------|------|
| `assets/chart_styles.css` | HTML报告样式 |

---

## 🔧 技术实现

### 数据获取流程

```
┌─────────────────────────────────────────────────────────┐
│                    股票狙击手分析流程                     │
└─────────────────────────────────────────────────────────┘
                            │
        ┌───────────────────┼───────────────────┐
        ▼                   ▼                   ▼
┌──────────────┐   ┌──────────────┐   ┌──────────────┐
│  akshare数据  │   │   新闻舆情    │   │  TradingView │
│  - 实时行情   │   │  - 新闻热点   │   │  - 技术图表  │
│  - 资金流向   │   │  - 股吧情绪   │   │  - 订单流    │
│  - 龙虎榜    │   │  - 题材分析   │   │  - 支撑阻力  │
└──────────────┘   └──────────────┘   └──────────────┘
        │                   │                   │
        └───────────────────┼───────────────────┘
                            ▼
              ┌─────────────────────┐
              │   数据清洗与整合      │
              └─────────────────────┘
                            │
                            ▼
              ┌─────────────────────┐
              │  超短六要素加权分析   │
              │  - 指数环境 15%      │
              │  - 主线题材 25%      │
              │  - 情绪周期 20%      │
              │  - 个股定位 20%      │
              │  - 风偏识别 10%      │
              │  - 联动关系 10%      │
              └─────────────────────┘
                            │
                            ▼
              ┌─────────────────────┐
              │    生成分析报告      │
              │  - Markdown报告     │
              │  - HTML可视化页面   │
              └─────────────────────┘
```

### 评分体系

**综合评分 = Σ(各要素得分 × 权重)**

| 要素 | 权重 | 数据来源 |
|------|------|----------|
| 指数环境 | 15% | akshare指数数据 |
| 主线题材 | 25% | 新闻热点分析 |
| 情绪周期 | 20% | 股吧舆情 + 资金流向 |
| 个股定位 | 20% | akshare行情 + 异动类型 |
| 风偏识别 | 10% | 市场风格判断 |
| 联动关系 | 10% | 板块联动分析 |

**操作建议映射**:
- 9-10分: 强力买入 | 重仓
- 8-8.9分: 积极买入 | 半仓以上
- 7-7.9分: 关注买入 | 半仓
- 6-6.9分: 轻仓试错 | 轻仓
- 5-5.9分: 观望 | 不参与
- <5分: 放弃 | 空仓

---

## 📊 报告示例

### Markdown 报告结构
```markdown
# 🎯 股票狙击手分析报告
## 平安银行 (000001)

**综合评分**: 7.5/10

### 一、基础数据
| 指标 | 数值 |
|------|------|
| 当前价格 | ¥12.50 |
| 涨跌幅 | +5.2% |
| 异动类型 | 快速拉升 |

### 二、题材热点分析
**关联题材排名:**
- 金融科技: 5 条相关新闻
- AI算力: 2 条相关新闻

**最新相关新闻:**
- 🟢 平安银行发布Q3财报，业绩超预期
- 🟢 金融科技板块获政策支持

### 三、股吧舆情
**整体情绪**: 偏多 (得分: 7.2/10)
**帖子统计**: 看多 65% | 看空 20% | 中性 15%
**热门关键词**: 突破, 看好, 加仓

### 四、交易建议
| 项目 | 建议 |
|------|------|
| 操作建议 | 关注买入 |
| 入场价位 | ≤ 12.00 或突破 13.50 |
| 止损价位 | < 11.76 |
| 目标价位 | ≥ 13.50 |
| 仓位建议 | 半仓 |
```

### HTML 页面特点
- 🎨 现代化深色主题UI
- 📈 评分环形图可视化
- 📊 六要素雷达图
- 📱 响应式设计（手机/电脑自适应）

---

## ⚙️ 配置说明

### 定时任务配置
**已自动配置**:
- 时间: 每周一至周五 9:00
- 时区: Asia/Shanghai
- 任务: 扫描前8只异动股票

**手动管理**:
```bash
# 查看定时任务
openclaw cron list

# 禁用定时任务
openclaw cron disable <job-id>

# 立即执行一次
openclaw cron run <job-id>
```

### TradingView 配置
TV 分析需要已登录的 TradingView 账号：
1. 在浏览器中登录 TV 账号
2. 使用 Chrome Relay 连接 OpenClaw
3. 分析时自动打开 TV 图表并生成截图指南

---

## 📝 更新日志

### v1.0 (2026-02-12)
- ✅ akshare 实时数据获取
- ✅ 新闻热点自动获取与题材分析
- ✅ 股吧舆情情绪分析
- ✅ 超短策略六要素加权评分
- ✅ Markdown/HTML 双格式报告
- ✅ 定时任务自动扫描
- 🔄 TradingView 自动化截图（需手动配合）

---

## ⚠️ 免责声明

本分析系统仅供学习和研究使用，不构成投资建议。股市有风险，投资需谨慎。所有分析结果仅供参考，投资者应根据自身情况独立判断。

---

*技能开发: 基于 chaoduan-strategy 框架*  
*更新日期: 2026-02-12*
